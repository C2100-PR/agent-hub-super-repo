apiVersion: v1
kind: ConfigMap
metadata:
  name: vertex-ai-config
  namespace: agent-hub
data:
  agent-count: "18"
  memory-per-agent: "96Gi"
  region: "us-west1"
  
---
apiVersion: v1
kind: Secret
metadata:
  name: vertex-ai-secrets
  namespace: agent-hub
type: Opaque
data:
  # Base64 encoded placeholders - replace with actual values
  api-key: "REPLACE_WITH_BASE64_ENCODED_KEY"
  service-account: "REPLACE_WITH_BASE64_ENCODED_SA"

---
apiVersion: apps/v1
kind: Deployment
metadata:
  name: vertex-ai-agents
  namespace: agent-hub
spec:
  replicas: 18
  selector:
    matchLabels:
      app: vertex-ai-agent
  template:
    metadata:
      labels:
        app: vertex-ai-agent
    spec:
      containers:
      - name: vertex-ai-agent
        image: gcr.io/c2100-pr/vertex-ai-agent:latest
        resources:
          requests:
            memory: "96Gi"
            cpu: "8"
          limits:
            memory: "96Gi"
            cpu: "12"
        env:
        - name: REGION
          valueFrom:
            configMapKeyRef:
              name: vertex-ai-config
              key: region
        volumeMounts:
        - name: agent-secrets
          mountPath: "/etc/secrets"
          readOnly: true
      volumes:
      - name: agent-secrets
        secret:
          secretName: vertex-ai-secrets